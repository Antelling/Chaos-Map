# 2026-02-12

## Chaos Map - CPU High Precision Rendering Mode

Added a new pure CPU rendering option for the chaos map visualization. This provides higher precision computation without GPU float32 quantization.

### Changes Made:

1. **New Render Mode Dropdown** (`chaos-map.html`)
   - GPU (WebGL - Fast) - default
   - CPU (High Precision) - pure CPU double precision

2. **New CPU Renderer** (`js/chaos-renderer-cpu.js`)
   - `CPUChaosMapRenderer` class with full double precision
   - RK4 integrator matching the WebGL shader exactly
   - Supports all color mappings (Rainbow, Heatmap, Viridis, etc.)
   - Supports both integrators (RK4 and Verlet)
   - Supports all perturbation modes (Fixed and Random Gaussian)
   - Deterministic randomness using hash-based RNG (matches GPU)

3. **Updated Main Renderer** (`js/chaos-renderer.js`)
   - Added `cpuChaosRenderer` instance
   - Added `renderMode` property

4. **Updated UI** (`js/chaos-renderer-ui.js`)
   - Event listener for render mode dropdown

5. **Updated Render Pipeline** (`js/chaos-renderer-render.js`)
   - Split `generateMap` into GPU and CPU paths
   - GPU mode: existing WebGL tile rendering
   - CPU mode: high-precision pixel-by-pixel computation

6. **Removed Float32 Rounding** (`js/pendulum-sim-cpu.js`)
   - Removed all `Math.fround()` calls
   - Full JavaScript double precision for pendulum simulations

### Key Technical Details:
- Uses `ImageData` for direct pixel manipulation
- Tile-based rendering to maintain UI responsiveness
- Same physics calculations as GPU shader but with 64-bit precision
- No quantization artifacts in divergence measurements

---

## Git Repository Restructure

Reorganized the Chaos-Map repository branches:
- Consolidated all work to `main` as the primary branch
- Deleted `master` branch (both local and remote)
- Created `cpu-sim-backend` branch for initial integration
- Created `optimized` branch for performance work

---

## CPU Chaos Map Renderer (64-bit Precision)

Added a complete CPU-based chaos map generation pipeline for maximum precision.

### New Files:
- **js/chaos-renderer-cpu.js** - `CPUChaosMapRenderer` class
  - Pure JavaScript double precision (64-bit) physics
  - RK4 and Velocity Verlet integrators
  - All color mappings: rainbow, heatmap, viridis, grayscale, cyclic
  - Tile-based rendering to maintain UI responsiveness
  - Matches WebGL shader physics exactly

### Updated Files:
- **chaos-map.html** - Added render mode dropdown
  - `GPU (WebGL - Fast)` - default 32-bit mode
  - `CPU (64-bit Precision)` - double precision mode
  
- **js/chaos-renderer.js** - Added render mode support
  - `renderMode` property ('gpu' or 'cpu')
  - `cpuChaosRenderer` instance
  
- **js/chaos-renderer-render.js** - Split render pipeline
  - `generateMapGPU()` - original WebGL implementation
  - `generateMapCPU()` - new 64-bit CPU implementation
  
- **js/chaos-renderer-ui.js** - Render mode event listener

### Why 64-bit matters:
- No float32 quantization artifacts
- More accurate divergence detection
- Better for scientific/comparison purposes
- Trade-off: slower rendering (CPU vs GPU)
